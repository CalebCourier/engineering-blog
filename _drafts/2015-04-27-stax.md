---
layout: post
title: "Stax"
subtitle: "Create and manage CloudFormation stacks in AWS"
header-img: "img/mon-field_rows.jpg"
category: code
tags: [open source, aws, stax, cloudformation]
---

When we were looking to build out an infrastructure in AWS ([Amazon Web Services](aws.amazon.com)), we took some time to understand how the [aws-cli](https://github.com/aws/aws-cli) (Universal Command Line Interface for Amazon Web Services) worked. With ideas from other projects found on [GitHub](https://github.com), we started wrapping commands in simple bash scripts, and pointed it to Cloudformation templates written in json. From there [stax](https://github.com/monsantoco/stax) was born, and we have released it as open source under the [BSD 3-clause license](http://opensource.org/licenses/BSD-3-Clause).

It’s easy to get started with stax to create and manage CloudFormation stacks (aka stax) in AWS ([Amazon Web Services](aws.amazon.com)) and the project provides several CloudFormation templates, better yet, more can be generated using our [cloudformation-template-generator](https://github.com/MonsantoCo/cloudformation-template-generator).

<!--more-->

For launching new AWS instances with stax, you can use Linux (Debian GNU/Linux 7 and Ubuntu 14.04 are supported) and Apple OS X (tested on 10.10 and 10.9). When running with a default template, you will end up with a VPC setup like the following:

![AWS Stax Diagram](/assets/aws-stax.png)

CoreOS hosts run Docker containers on the Gateway and Service layer, while Amazon Linux instances server as the failover NAT devices for the internal hosts. A quick run of stax without arguements will show you the usage, giving you an idea of what the tool is capable of:

```
$ ./stax
Usage: stax [OPTIONS] COMMAND

Options:
  -c,--config=CONFIG       Use file CONFIG rather than config/vpc-default.json
  -d,--debug               Turn on verbose messages
  -h,--help                Output this message
  -j,--jump=IP             SSH through host with IP address IP
  -m,--module=MOD          Use config/MOD.json and template/MOD.json
  -t,--template=TEMPLATE   Use file TEMPLATE rather than template/vpc-default.json
  -v,--version             Print name and version information
  -y,--yes                 Do not prompt for confirmation

If an argument is required for a long option, so to the short. Same for
optional arguments.

Commands:
  add                Add functionality to an existing VPC
  check              Run various tests against an existing stax
  connect [TARGET]   Connect to bastion|gateway|service in the VPC stax over SSH
  create             Create a new VPC stax in AWS
  describe           Describe the stax created from this host
  delete             Delete the existing VPC stax
  dockerip-update    Fetch docker IP addresses and update related files
  fleet              Run various fleetctl commands against the fleet cluster
  help               Output this message
  history            View history of recently created/deleted stax
  list               List all completely built and running stax
  rds PASSWORD       Create an RDS instance in the DB subnet
  rds-delete RDSIN   Delete RDS instance RDSIN
  remove ADD         Remove the previously added ADD
  services           List servers that are available to run across a stax
  start SERVICE      Start service SERVICE in the fleet cluster
  test               Automated test to exercise functionality of stax
  validate           Validate CloudFormation template

For more help, check the docs: https://github.com/MonsantoCo/stax
```

To try it out, just clone the repo and follow the documentation in the readme.

```bash
git clone https://github.com/MonsantoCo/stax
more README.md
```

We hope that this tool will be useful to the community and look forward to feedback on what people think of it. We’re open to issues you might create or pull requests to make stax better.
